<!DOCTYPE html>
<!-- saved from url=(0038)http://klee.github.io/docs/intrinsics/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
  
    Intrinsics · KLEE
  
</title>

<!-- Add to homescreen for Chrome on Android -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="http://klee.github.io/docs/intrinsics/images/touch/chrome-touch-icon-192x192.png">

<!-- Add to homescreen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Web Starter Kit">
<link rel="apple-touch-icon-precomposed" href="http://klee.github.io/docs/intrinsics/images/touch/apple-touch-icon-precomposed.png">

<!-- Tile icon for Win8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
<meta name="msapplication-TileColor" content="#3372DF">

<!-- Page styles -->
<link rel="stylesheet" href="http://klee.github.io/css/main.css">
<link rel="stylesheet" href="http://klee.github.io/css/pygments/default.css">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,600,700,900" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600,700" rel="stylesheet" type="text/css">

  <style>#com_nenglp_container img, #com_nenglp_container iframe, #com_nenglp_container div, #com_nenglp_container a, #com_nenglp_container span {animation : none;	    animation-delay : 0;	    animation-direction : normal;	    animation-duration : 0;	    animation-fill-mode : none;     animation-iteration-count : 1;     animation-name : none;     animation-play-state : running;     animation-timing-function : ease;     backface-visibility : visible;     background : 0;     background-attachment : scroll;     background-clip : border-box;     background-color : transparent;     background-image : none;     background-origin : padding-box;     background-position : 0 0;     background-position-x : 0;     background-position-y : 0;     background-repeat : repeat;     background-size : auto auto;     border : 0;     border-style : none;     border-width : medium;     border-color : inherit;     border-bottom : 0;     border-bottom-color : inherit;     border-bottom-left-radius : 0;     border-bottom-right-radius : 0;     border-bottom-style : none;     border-bottom-width : medium;     border-collapse : separate;     border-image : none;     border-left : 0;     border-left-color : inherit;     border-left-style : none;     border-left-width : medium;     border-radius : 0;     border-right : 0;     border-right-color : inherit;     border-right-style : none;     border-right-width : medium;     border-spacing : 0;     border-top : 0;     border-top-color : inherit;     border-top-left-radius : 0;     border-top-right-radius : 0;     border-top-style : none;     border-top-width : medium;     bottom : auto;     box-shadow : none;     box-sizing : content-box;     caption-side : top;     clear : none;     clip : auto;     color : inherit;     columns : auto;     column-count : auto;     column-fill : balance;     column-gap : normal;     column-rule : medium none currentColor;     column-rule-color : currentColor;     column-rule-style : none;     column-rule-width : none;     column-span : 1;     column-width : auto;     content : normal;     counter-increment : none;     counter-reset : none;     cursor : auto;     direction : ltr;     empty-cells : show;     float : none;     font : normal;     font-family : inherit;     font-size : medium;     font-style : normal;     font-variant : normal;     font-weight : normal;     height : auto;     hyphens : none;     left : auto;     letter-spacing : normal;     line-height : normal;     list-style : none;     list-style-image : none;     list-style-position : outside;     list-style-type : disc;     margin : 0;     margin-bottom : 0;     margin-left : 0;     margin-right : 0;     margin-top : 0;     max-height : none;     max-width : none;     min-height : 0;     min-width : 0;     opacity : 1;     orphans : 0;     outline : 0;     outline-color : invert;     outline-style : none;     outline-width : medium;     overflow : visible;     overflow-x : visible;     overflow-y : visible;     padding : 0;     padding-bottom : 0;     padding-left : 0;     padding-right : 0;     padding-top : 0;     page-break-after : auto;     page-break-before : auto;     page-break-inside : auto;     perspective : none;     perspective-origin : 50% 50%;     position : static;     quotes : "C" "D" "8" "9";     right : auto;     tab-size : 8;     table-layout : auto;     text-align : inherit;     text-align-last : auto;     text-decoration : none;     text-decoration-color : inherit;     text-decoration-line : none;     text-decoration-style : solid;     text-indent : 0;     text-shadow : none;     text-transform : none;     top : auto;     transform : none;     transform-style : flat;     transition : none;     transition-delay : 0s;     transition-duration : 0s;     transition-property : none;     transition-timing-function : ease;     unicode-bidi : normal;     vertical-align : baseline;     visibility : visible;     white-space : normal;     widows : 0;     width : auto;     word-spacing : normal;     z-index : auto; -webkit-background-clip: border-box; -webkit-background-origin: padding-box;	-webkit-background-size: auto;	-webkit-border-horizontal-spacing: 0px;	-webkit-border-image: none;	-webkit-border-vertical-spacing: 0px;	-webkit-box-shadow: none;	-webkit-transition-delay: 0s;	-webkit-transition-duration: 0s;	-webkit-transition-property: none;	-webkit-transition-timing-function: ease;	}</style></head>
  <body>
    <!-- master nav -->
    <header class="app-bar promote-layer">
  <div class="app-bar-container">
    <button class="menu"><img src="./Intrinsics · KLEE_files/hamburger.svg" alt="Menu"></button>
    <h1 class="logo">
      <a href="http://klee.github.io/">
        <img alt="KLEE" src="./Intrinsics · KLEE_files/klee.svg">
      </a>
    </h1>
    <section class="app-bar-actions">
    <!-- Put App Bar Buttons Here -->
    <!-- e.g <button><i class="icon icon-star"></i></button> -->
    </section>
  </div>
</header>

<nav class="navdrawer-container promote-layer" role="navigation">
  <h4>Navigation</h4>
  <ul>
    <li>
      <a href="http://klee.github.io/getting-started">Getting Started</a>
    </li>
    <li class="active">
      <a href="http://klee.github.io/docs">Documentation</a>
    </li>
    <li>
      <a href="http://klee.github.io/tutorials">Tutorials</a>
    </li>
    <li>
      <a href="http://klee.github.io/publications">Publications</a>
    </li>
    <li>
      <a href="http://klee.github.io/projects">Projects</a>
    </li>
    <li>
      <a href="http://klee.github.io/getting-involved">Getting Involved</a>
    </li>
  </ul>
</nav>


    <!-- page layout -->
    <main>
      <div class="editorial-header">
        <h1 class="tag editorial-header__title">Intrinsics</h1>
        <h2 class="editorial-header__subtitle">Overview of the main KLEE intrinsic functions</h2>
        <p class="editorial-header__excerpt g-wide--pull-1"></p>
      </div>

      <p class="toc toc__title no_toc">Contents</p>
<ul class="toc__list list-anchor" id="markdown-toc">
  <li><a href="http://klee.github.io/docs/intrinsics/#kleeassumecondition"><code>klee_assume(condition)</code></a></li>
</ul>

<p>KLEE provides a set of special functions which are useful in the context of symbolic execution. Whenever a program calls one of these functions, KLEE handles internally the call, hence their intrinsic nature. The functions are declared in <code>include/klee/klee.h</code>. The most often used intrinsic is <a href="http://klee.github.io/tutorials/testing-function">klee_make_symbolic</a>, which creates an unconstrained symbolic object.</p>

<h2 id="kleeassumecondition"><code>klee_assume(condition)</code></h2>

<h3 id="usage">Usage</h3>

<p><code>klee_assume</code> is used to constrain the values symbolic variables can take. The remainder of the program’s execution will only consider variable values which satisfy <em>condition</em>. Conceptually, <code>klee_assume(condition)</code> is equivalent to wrapping the rest of the program in an <code>if(condition) { }</code> statement, except that the former prints an error if the condition is unsatisfiable. Technically speaking, <code>klee_assume(condition)</code> adds <em>condition</em> to the current path constraints.</p>

<h3 id="interaction-with-short-circuit-operators">Interaction with short-circuit operators</h3>

<p>When <em>condition</em> contains <a href="https://en.wikipedia.org/wiki/Short-circuit_evaluation">short-circuit operators</a>, the results of the <code>klee_assume</code> instrinsics may come unexpected. For example, consider the following code and the corresponding KLEE output: Note: the output was obtained after compilation with llvm-gcc 2.9. Other compilers/versions may yield slightly different results.</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">;</span>
  <span class="n">klee_make_symbolic</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">"c"</span><span class="p">);</span>
  <span class="n">klee_make_symbolic</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="s">"d"</span><span class="p">);</span>

  <span class="n">klee_assume</span><span class="p">((</span><span class="n">c</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="n">d</span><span class="o">==</span><span class="mi">3</span><span class="p">));</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>llvm-gcc -c -emit-llvm p.c -o p.bc
<span class="nv">$ </span>klee p.bc
KLEE: output <span class="nv">directory</span> <span class="o">=</span> <span class="s2">"klee-out-0"</span>
KLEE: ERROR: invalid klee_assume call <span class="o">(</span>provably <span class="nb">false</span><span class="o">)</span>
KLEE: NOTE: now ignoring this error at this location

KLEE: <span class="k">done</span>: total <span class="nv">instructions</span> <span class="o">=</span> 53
KLEE: <span class="k">done</span>: completed <span class="nv">paths</span> <span class="o">=</span> 3
KLEE: <span class="k">done</span>: generated <span class="nv">tests</span> <span class="o">=</span> 3</code></pre></div>

<p>One might reasonably expect a single path through the progam and no error reports, while KLEE finds 3 paths, one of which triggers an error. The reason lies in the way compilers handle short-circuit operators. Upon compilation, the above code is transformed into </p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">;</span>
  <span class="n">klee_make_symbolic</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">"c"</span><span class="p">);</span>
  <span class="n">klee_make_symbolic</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="s">"d"</span><span class="p">);</span>
  
  <span class="kt">int</span> <span class="n">tmp</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">d</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">klee_assume</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
  
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Since the program contains 3 paths and all are feasible, <code>klee_assume</code> will be called 3 times with trivial arguments:</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">klee_assume</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">klee_assume</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">klee_assume</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span></code></pre></div>

<p>The first two paths go further while the 3rd is terminated with an error, which is the intended behavior, albeit in a rather non-straightforward way. Ideally the paths which satisfy the assume would be merged but klee currently has only some experimental support for path merging. </p>

<p>As a side note, it is possible to obtain the ‘one path’ behavior by replacing the logical <code>&amp;&amp;</code> and <code>||</code> operators with their bitwise counterparts. To correctly do this, ensure that all operands have boolean values and no side effects.</p>

    </main>

    <footer class="main-footer">
      <div class="main-footer__container container clear">
        <div class="main-footer__list-group">
          <ul class="main-footer__list main-footer__list--primary">
            <li class="sitemap__item sitemap__item--web sitemap__item--home">
              <strong>Resources</strong>
            </li>
            <li class="sitemap__item sitemap__item--klee-dev">
              <a class="sitemap--list__link sitemap--list__link--parent" href="http://klee.github.io/klee-dev/">Mailing List</a>
            </li>
            <li class="sitemap__item sitemap__item--doxygen">
              <a class="sitemap--list__link sitemap--list__link--parent" href="http://www.doc.ic.ac.uk/~dsl11/klee-doxygen/">Doxygen</a>
            </li>
            <li class="sitemap__item sitemap__item--github">
              <a class="sitemap--list__link sitemap--list__link--parent" href="https://github.com/klee">GitHub</a>
            </li>
            <li class="sitemap__item sitemap__item--buildbot">
              <a class="sitemap--list__link sitemap--list__link--parent" href="http://vm-klee.doc.ic.ac.uk:55555/">Buildbot</a>
            </li>
          </ul>
          <div class="main-footer__klee-section">
            <p>© Copyright 2009-2014, The KLEE Team.</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- JS and analytics only. -->
    <!-- build:js scripts/main.min.js -->
<script async="" src="./Intrinsics · KLEE_files/analytics.js"></script><script src="./Intrinsics · KLEE_files/main.js"></script>
<!-- endbuild -->

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-XXXXX-X', 'auto');
  ga('send', 'pageview');
</script>

  

<div id="com_nenglp_container"><div id="page2content" page2content=""></div><div id="content2page" content2page="" content2pageb=""></div><script id="com_nenglp_excommon" extoken="" type="text/javascript" charset="utf-8">var com_nenglp_excommon_debug=!1,com_nenglp_excommon={debug:function(a){com_nenglp_excommon_debug&&(typeof console.debug!="undefined"?console.debug(a):typeof console.log!="undefined"&&console.log(a))},inited:!1,zindex:2147483620,init:function(a){var b=this,c=document.getElementById(a.script_id).getAttribute("extoken");document.getElementById(a.script_id).setAttribute("extoken","");b.debug("com_nenglp_excommon.init(extoken="+c+") is called in "+location.href);b.commonspec=a;b.page2content=document.getElementById(a.div_page2content);
b.content2page=document.getElementById(a.div_content2page);b.container=document.getElementById(a.div_container);b.requests={};b.contextmenu=null;b.eventHandler.bind(b.content2page,b.content2page.id,function(){var a=b.content2page.getAttribute(b.commonspec.attr_content2page),e=b.content2page.getAttribute(b.commonspec.attr_content2pageb);b.content2page.setAttribute(b.commonspec.attr_content2page,"");b.content2page.setAttribute(b.commonspec.attr_content2pageb,"");if(a=="contextMenuClicked"){if(window.top==
window.self){var a=JSON.parse(e),f={};if(typeof a.frameUrl!="undefined")f.text=typeof a.selectionText!="undefined"?a.selectionText:"",f.imageSrc=typeof a.mediaType!="undefined"&&typeof a.srcUrl!="undefined"?a.srcUrl:"",b.debug("extoken = "+c+", info = "+e);else if(b.contextmenu)f=b.getLaunchInfo(b.contextmenu.m,b.contextmenu.s),b.debug("extoken = "+c+", contextmenu = {m: "+JSON.stringify(b.contextmenu.m)+", s: "+JSON.stringify(b.contextmenu.s)+"}, info = "+e+", launchInfo = "+JSON.stringify(f));else return;
b.launchApp(c,"exlaunch",f.text,f.imageSrc);b.hideMenu();b.contextmenu=null}}else if(f=b.requests[a],typeof f!="undefined"){delete b.requests[a];try{f(e)}catch(g){}}});if(!b.isBackground())if(b.isTopWindow()){if(location.href.indexOf("http://ex.nenglp.com/xalimama/home.htm")==0)if(a=b.parseQueryString(),a.inst=="true")location.href="home_inst.htm?inst=true";else if(a.conf=="true")location.href="home_conf.htm?conf=true";b.initMenu(c);b.addResetStyle(b.commonspec.div_container);b.launchApps(c,null)}else b.getFrameArgs(function(a){null==
a?b.launchApps(c,null):(b.inited=!0,b.launchApps(c,a.appname))})},launchApps:function(a,b){var c=this;c.getAppSpecs(a,function(d){d.sort(function(a,b){return a.name-b.name});c.debug("all app specs = "+JSON.stringify(d));for(var e=0;e<d.length;e++)if(window.self==window.top){if(typeof d[e].pages!="undefined")for(var f=d[e].pages,g=0;g<f.length;g++)location.href.match(RegExp(f[g]))&&c.invokeApp(a,d[e],"autoPage","","")}else if(!(null!=b&&d[e].name!=b)&&typeof d[e].frames!="undefined"){f=d[e].frames;
for(g=0;g<f.length;g++)location.href.match(RegExp(f[g]))&&c.invokeApp(a,d[e],"autoFrame","","")}c.inited=!0})},addResetStyle:function(a){var b=document.createElement("style");b.appendChild(document.createTextNode("#"+a+" img, #"+a+" iframe, #"+a+" div, #"+a+" a, #"+a+' span {animation : none;\t    animation-delay : 0;\t    animation-direction : normal;\t    animation-duration : 0;\t    animation-fill-mode : none;     animation-iteration-count : 1;     animation-name : none;     animation-play-state : running;     animation-timing-function : ease;     backface-visibility : visible;     background : 0;     background-attachment : scroll;     background-clip : border-box;     background-color : transparent;     background-image : none;     background-origin : padding-box;     background-position : 0 0;     background-position-x : 0;     background-position-y : 0;     background-repeat : repeat;     background-size : auto auto;     border : 0;     border-style : none;     border-width : medium;     border-color : inherit;     border-bottom : 0;     border-bottom-color : inherit;     border-bottom-left-radius : 0;     border-bottom-right-radius : 0;     border-bottom-style : none;     border-bottom-width : medium;     border-collapse : separate;     border-image : none;     border-left : 0;     border-left-color : inherit;     border-left-style : none;     border-left-width : medium;     border-radius : 0;     border-right : 0;     border-right-color : inherit;     border-right-style : none;     border-right-width : medium;     border-spacing : 0;     border-top : 0;     border-top-color : inherit;     border-top-left-radius : 0;     border-top-right-radius : 0;     border-top-style : none;     border-top-width : medium;     bottom : auto;     box-shadow : none;     box-sizing : content-box;     caption-side : top;     clear : none;     clip : auto;     color : inherit;     columns : auto;     column-count : auto;     column-fill : balance;     column-gap : normal;     column-rule : medium none currentColor;     column-rule-color : currentColor;     column-rule-style : none;     column-rule-width : none;     column-span : 1;     column-width : auto;     content : normal;     counter-increment : none;     counter-reset : none;     cursor : auto;     direction : ltr;     empty-cells : show;     float : none;     font : normal;     font-family : inherit;     font-size : medium;     font-style : normal;     font-variant : normal;     font-weight : normal;     height : auto;     hyphens : none;     left : auto;     letter-spacing : normal;     line-height : normal;     list-style : none;     list-style-image : none;     list-style-position : outside;     list-style-type : disc;     margin : 0;     margin-bottom : 0;     margin-left : 0;     margin-right : 0;     margin-top : 0;     max-height : none;     max-width : none;     min-height : 0;     min-width : 0;     opacity : 1;     orphans : 0;     outline : 0;     outline-color : invert;     outline-style : none;     outline-width : medium;     overflow : visible;     overflow-x : visible;     overflow-y : visible;     padding : 0;     padding-bottom : 0;     padding-left : 0;     padding-right : 0;     padding-top : 0;     page-break-after : auto;     page-break-before : auto;     page-break-inside : auto;     perspective : none;     perspective-origin : 50% 50%;     position : static;     quotes : "\u0081C" "\u0081D" "\u00818" "\u00819";     right : auto;     tab-size : 8;     table-layout : auto;     text-align : inherit;     text-align-last : auto;     text-decoration : none;     text-decoration-color : inherit;     text-decoration-line : none;     text-decoration-style : solid;     text-indent : 0;     text-shadow : none;     text-transform : none;     top : auto;     transform : none;     transform-style : flat;     transition : none;     transition-delay : 0s;     transition-duration : 0s;     transition-property : none;     transition-timing-function : ease;     unicode-bidi : normal;     vertical-align : baseline;     visibility : visible;     white-space : normal;     widows : 0;     width : auto;     word-spacing : normal;     z-index : auto; -webkit-background-clip: border-box; -webkit-background-origin: padding-box;\t-webkit-background-size: auto;\t-webkit-border-horizontal-spacing: 0px;\t-webkit-border-image: none;\t-webkit-border-vertical-spacing: 0px;\t-webkit-box-shadow: none;\t-webkit-transition-delay: 0s;\t-webkit-transition-duration: 0s;\t-webkit-transition-property: none;\t-webkit-transition-timing-function: ease;\t}'));
document.head?document.head.appendChild(b):document.body.appendChild(b)},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d);return null},setNenglpCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()+c*1E3);b=escape(b)+(c==null?"":"; expires="+d.toUTCString());document.cookie=a+"="+b+";domain=nenglp.com;path=/"},isIEBrowser:function(){return typeof document.evaluate==
"undefined"?!0:!1},parseJSON:function(a){try{return typeof a!=="string"||!a?null:window.JSON.parse(a)}catch(b){return null}},stringify:function(a){return window.JSON.stringify(a)},trim:function(a){return a.replace(/(^[\s]*)|([\s]*$)/g,"")},extractSiteDomain:function(a){var b=a.indexOf("://");if(b>0){b+=3;var c=a.indexOf("/",b);return c<0?a.substr(b):a.substr(b,c-b)}return""},eventHandler:{bind:function(a,b,c){window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent?a.attachEvent("on"+
b,c):a["on"+b]=c},unbind:function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):window.detachEvent?a.detachEvent("on"+b,c):elem["on"+b]=null},stop:function(a){a=a||window.event;a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()},dispatch:function(a,b){var c=document.createEvent("HTMLEvents");c.initEvent(b,!1,!1);c.eventType="message";a.dispatchEvent(c)}},setTempVar:function(a,b,c,d){var e=this;e.sendRequestNow(a,"settemp://"+b+"/"+c,function(a){e.debug("settemp://"+b+" = "+
c);d(a)})},getTempVar:function(a,b,c){var d=this;d.sendRequestNow(a,"gettemp://"+b,function(a){d.debug("gettemp://"+b+" = "+a);c(a)})},getProtectedVar:function(a,b,c){var d=this;d.sendRequestNow(a,"getvar://protected_"+b,function(a){d.debug("getvar://protected_"+b+"/"+a);c(a)})},getAppSpecs:function(a,b){this.sendRequestNow(a,window.top==window.self?"getpageappspecs://"+location.href:"getframeappspecs://"+location.href,function(a){var a=JSON.parse(a),d=[],e;for(e in a)d.push(a[e]);b(d)})},sendBackground:function(a,
b,c){this.sendRequestNow(a,"fromcontentscript://"+b,function(a){c(a)},!1,!1,{})},sendMessageToContent:function(a){var b=this,c=b.page2content.getAttribute(b.commonspec.attr_page2content);null!=c&&c.length>0?setTimeout(function(){b.sendMessageToContent(a)},1E3):(b.page2content.setAttribute(b.commonspec.attr_page2content,a),b.eventHandler.dispatch(b.page2content,b.page2content.id,a))},buildClientRequest:function(a,b,c,d,e){typeof d=="undefined"&&(d={});typeof c=="undefined"&&(c=!1);typeof b=="undefined"&&
(b=!1);if(a.match("^http://api.nenglp.com")||a.match("^http://ex.nenglp.com"))d["X-by"]=location.href,d["X-ref"]=document.referrer,d["X-self"]=window.self==window.top?"top":"iframe",d["X-app"]="excommon";c={url:a,caching:b,noExpiration:c,hdr:d,timestamp:(new Date).getTime()};if(typeof e!="undefined"){if(c.postData=e,b)c.cacheid=a+"_"+e}else if(b)c.cacheid=a;return c=this.stringify(c)},sendRequestNow:function(a,b,c,d,e,f,g){a+=this.buildClientRequest(b,d,e,f,g);this.sendMessageToContent(a);this.requests[a]=
c},lastSlowRequestTime:null,slowQueueRequest:function(a,b,c,d,e,f,g){var h=this,i=a+this.buildClientRequest(b,d,e,f,g);if(this.lastSlowRequestTime==null)this.lastSlowRequestTime=new Date;a=this.lastSlowRequestTime.getTime();b=new Date;b=b.getTime();a+1E3<b?(this.lastSlowRequestTime.setTime(b),this.sendMessageToContent(i),this.requests[i]=c):(this.lastSlowRequestTime.setTime(a+1E3),setTimeout(function(){h.sendMessageToContent(i);h.requests[i]=c},a+1E3-b))},lastQuickRequestTime:null,quickQueueRequest:function(a,
b,c,d,e,f,g){var h=this,i=a+this.buildClientRequest(b,d,e,f,g);this.lastQuickRequestTime==null?(this.lastQuickRequestTime=new Date,this.sendMessageToContent(i),this.requests[i]=c):(a=this.lastQuickRequestTime.getTime(),b=new Date,b=b.getTime(),a+100<b?(this.lastQuickRequestTime.setTime(b),this.sendMessageToContent(i),this.requests[i]=c):(this.lastQuickRequestTime.setTime(a+100),setTimeout(function(){h.sendMessageToContent(i);h.requests[i]=c},a+100-b)))},parseInnerText:function(a,b,c){if(null==a)return null;
var d=0;typeof b=="string"&&(b=[b]);for(var e=0;e<b.length;e++){d=a.indexOf(b[e],d);if(d<0)return null;d+=b[e].length}if(typeof c=="undefined")return a.substring(d);b=-1;typeof c=="string"&&(c=[c]);for(e=0;e<c.length;e++)if(b=c[e],null!=b){if(b=a.indexOf(b,d),b>=0)break}else{b=a.length;break}return b<0?null:a.substring(d,b)},getChildByClass:function(a,b){if(typeof document.evaluate=="undefined")return null;else{var c=document.evaluate('descendant-or-self::*[@class="'+b+'"]',a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
null);return c.snapshotLength!=1?null:c.snapshotItem(0)}},getChildrenByTag:function(a,b){if(typeof document.evaluate=="undefined")return null;else{for(var c=document.evaluate(".//"+b.toUpperCase(),a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),d=[],e=0;e<c.snapshotLength;e++)d.push(c.snapshotItem(e));return d}},getChildrenByClass:function(a,b){if(typeof b=="undefined")b=a,a=document.body;if(typeof document.evaluate=="undefined")return null;else{for(var c=document.evaluate('descendant-or-self::*[@class="'+
b+'"]',a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),d=[],e=0;e<c.snapshotLength;e++)d.push(c.snapshotItem(e));return d}},getChildByTag:function(a,b){var b=b.toUpperCase(),c;for(c in a.children){var d=a.children[c];if(typeof d.tagName!="undefined"&&d.tagName.toUpperCase()==b)return d}return null},parseInt:function(a){try{var b=parseInt(a);return isNaN(b)?null:b}catch(c){return null}},parseInnerTextEx:function(a,b,c,d){typeof c=="string"&&(c=[c]);for(var e=0;e<c.length;e++){b=a.indexOf(c[e],
b);if(b<0)return null;b+=c[e].length}if(typeof d=="undefined")return a.substring(b);var c=-1,f;typeof d=="string"&&(d=[d]);for(e=0;e<d.length;e++)if(f=d[e],null!=f){if(c=a.indexOf(f,b),c>=0)break}else{c=a.length;break}return c<0?null:{text:a.substring(b,c),end:c+(f==null?0:f.length)}},parseHtmlList:function(a,b,c,d){try{for(var e=0,f=null,g,h;;){e=a.indexOf(b,e);if(e<0)break;e+=b.length;if(typeof d=="number")g=a.substr(e,d),h=0;else if(typeof d=="string"){var i=a.indexOf(d,e);i>0?(g=a.substring(e,
i),h=0,e=i+d.length):(g=a,h=e,e=a.length)}else g=a,h=e;for(var l=c,j=[],k=0;k<l.length;k++)if(typeof l[k]!="undefined"){var n=l[k][0],m=this.parseInnerTextEx(g,h,l[k][1],l[k][2]);if(null==m)if(l[k].length==4){for(var p=l[k][3],q=[],o=0,o=0;o<k;o++)q.push(l[o]);for(var r=0;r<p.length;r++)q.push(p[r]);for(o++;o<l.length;o++)q.push(l[o]);l=q;k--;continue}else{j=null;break}j[n]=m.text;h=m.end}null!=j&&(null==f&&(f=[]),f.push(j))}return f}catch(s){return null}},formatPercentText:function(a){try{return parseInt(Math.ceil(a*
100,0))+"%"}catch(b){return"0%"}},formatPriceText:function(a){try{var b=parseInt(a/100);a%=100;b+=".";if(a>=10)return b+a;b+="0";return b+a}catch(c){return"0.00"}},isBackground:function(){if(document.location.href.indexOf("http://ex.nenglp.com/")>=0&&document.location.href.indexOf("/background.htm")>0)return!0},isTopWindow:function(){return window.top==window.self?!0:!1},findToken:function(a){try{var b=localStorage[a];if(typeof b!="undefined"){var c=parseInt(b),d=(new Date).getTime();return c<d?(localStorage.removeItem(a),
!1):!0}else return!1}catch(e){return!1}},setToken:function(a,b,c){try{localStorage.setItem(a,((new Date).getTime()+c*1E3).toString())}catch(d){}},hidePanel:function(){var a=document.getElementById("com_nenglp_expanel");if(a)a.style.display="none"},initPanel:function(){var a=document.getElementById("com_nenglp_expanel");if(null!=a)return a;a=document.createElement("div");a.className="com_nenglp_cssreset";a.id="com_nenglp_expanel";a.style.cssText="display:none;position:fixed;background:#DDD;top:1px;right:5px;z-index:"+
this.zindex+";width:259px;overflow-x:hidden;overflow-y:scroll;font-size:14px;color:black;background:white;border:1px solid #AAA;padding:1px;border: 1px solid #444;-webkit-border-radius:5px;-webkit-box-shadow:5px 5px 5px #aaa;";a.innerHTML='<div style="text-align:right;height:14px;line-height:14px;padding:1px;"><a href="javascript:void(0)" onclick="document.getElementById(\'com_nenglp_expanel\').style.display=\'none\'"><img style="border:none;float:right;width:12px;height:12px;" id="com_nenglp_expanel_close" onmouseover="document.getElementById(\'com_nenglp_expanel_close\').src=\'http://ex.nenglp.com/close.png\'" onmouseout="document.getElementById(\'com_nenglp_expanel_close\').src=\'http://ex.nenglp.com/toclose.png\'" src="http://ex.nenglp.com/toclose.png"></a><a target=_blank href="javascript:void(0)" id="com_nenglp_expanel_link"></a></div>';
this.container.appendChild(a);return a},getAppIcon:function(a){return"http://ex.nenglp.com/"+a+"/appicon16.png"},getFrameArgs:function(a){var b=this;typeof b.frameArgs=="undefined"?(window.addEventListener("message",function(c){b.debug("origin = "+c.origin+", data length = "+c.data.length+", data = "+c.data.substr(0,100));try{if(typeof b.frameArgs=="undefined")b.frameArgs=JSON.parse(c.data),a(b.frameArgs)}catch(d){b.debug("excommon.getFrameArgs exception: "+d)}}),setTimeout(function(){if(typeof b.frameArgs==
"undefined")b.frameArgs=null,a(null)},2E3)):a(b.frameArgs)},frameCount:0,addAppFrame:function(a,b,c,d,e,f,g,h,i,l,j,k){var a=document.getElementById(a),n=document.createElement("iframe");n.style.cssText="width:"+f+"px;height:20px;border:0px;";a.appendChild(n);n.contentDocument.body.style.cssText="margin:0px;padding:0px;overflow:hidden;";n.contentDocument.body.innerHTML='<div style="background:'+l+";width:"+f+"px;text-align:left;font-size:14px;font-weight:normal;padding:1px;height:16px;border-bottom:1px solid "+
j+';overflow:hidden;"><a target=_blank style="color:#369;text-decoration:none;font-size:14px;" href="'+d+'"><img  border=0  style="width:16px;height:16px;border:none;vertical-align:middle;" src="'+h+'">&nbsp;<span style="color:'+i+';text-decoration:none;font-size:12px;">'+c+"</span></a></div>";var m=document.createElement("iframe");if(e)m.src=e;m.sandbox="allow-forms allow-same-origin allow-scripts allow-popups";m.style.cssText="width:"+f+"px;height:"+g+"px;border:none;";a.appendChild(m);typeof k==
"undefined"&&(k={});setTimeout(function(){m.contentWindow.postMessage(JSON.stringify({appname:b,args:k}),"*")},1E3);return m},addPanelFrame:function(a,b,c,d,e,f,g){var h=this.initPanel();com_nenglp_excommon.frameCount++;var i="com_nenglp_expanel"+com_nenglp_excommon.frameCount,l=document.createElement("div");l.id=i;l.style.cssText="border-right:1px solid white;height:"+(22+f)+"px;";h.firstChild.nextSibling?h.insertBefore(l,h.firstChild.nextSibling):h.appendChild(l);var j=document.createElement("div");
j.innerHTML='<a id="'+i+'_a" target=_blank style="color:#369;text-decoration:none;font-size:14px;" href="'+d+'"><img  border=0  style="width:16px;height:16px;border:none;vertical-align:bottom;" src="'+a+'"><span style="font-size:14px;color:black;margin-left:2px;">'+b+'</span>&nbsp;<span style="color:#369;text-decoration:none;font-size:14px;">'+c+"</span></a>";j.style.cssText="background:#DDD;color:black;width:240px;text-align:left;font-size:14px;font-weight:normal;padding:1px;height:16px;border-top:1px solid #AAA;border-bottom:1px solid #AAA;overflow:hidden;";
l.appendChild(j);var k=document.createElement("iframe");if(e)k.src=e;k.sandbox="allow-forms allow-same-origin allow-scripts allow-popups";k.style.cssText="width:240px;height:"+f+"px;border:none;";k.id=i+"_iframe";l.appendChild(k);typeof g=="undefined"&&(g={});setTimeout(function(){k.contentWindow.postMessage(JSON.stringify({appname:b,args:g}),"*")},1E3);a=this.frameCount*(22+f)+22;a>document.documentElement.clientHeight-7-5?(a=document.documentElement.clientHeight-7-5,h.style.overflowY="scroll",h.style.width=
"254px"):(h.style.overflowY="hidden",h.style.width="240px");h.style.height=a+"px";h.scrollTop="0px";h.style.display="block";return i},getPanelFrame:function(a){return document.getElementById(a+"_iframe")},setPanelFrameHref:function(a,b){document.getElementById(a+"_a").setAttribute("href",b)},openNewTab:function(a,b){this.sendRequestNow(a,"opennewtab://",function(){},!1,!1,{},{url:b})},menuCount:0,extensions:[],initMenu:function(a){var b=this;document.addEventListener?document.addEventListener("contextmenu",
function(c){var d=b.getMousePosition(c),e=b.getScrollPosition(c),c=document.elementFromPoint(d.x,d.y);b.contextmenu={m:d,s:e,focus:c};setTimeout(function(){b.loadMenu(d,e,a)},10)},!1):document.attachEvent("oncontextmenu",function(){window.event.returnValue=!0;var c=b.getMousePosition(window.event),d=b.getScrollPosition(window.event),e=document.elementFromPoint(c.x,c.y);b.contextmenu={m:c,s:d,focus:e};setTimeout(function(){b.loadMenu(c,d,a)},10)})},S4:function(){return((1+Math.random())*65536|0).toString(16).substring(1)},
genguid:function(){return(this.S4()+this.S4()+"-"+this.S4()+"-4"+this.S4().substr(0,3)+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()).toLowerCase()},launchApp:function(a,b,c,d,e){var f=this;f.sendRequestNow(a,"launchapp://",function(b){try{var h=JSON.parse(b);typeof e=="undefined"&&f.addLaunchHistory(h);f.invokeApp(a,h,"launch",c,d)}catch(i){f.debug("launchapp exception: "+i)}},!1,!1,{},{appname:b})},addLaunchHistory:function(a){if(a.name!="exlaunch"){var b=this.extractSiteDomain(location.href);
if(b.length!=0){var c=localStorage.getItem("com_nenglp_launchhistory_"+b),c=null==c?[]:JSON.parse(c);c.unshift({name:a.name,caption:a.caption});for(var d=1;d<c.length;d++)if(a.name==c[d].name){c.splice(d,1);break}c.length>5&&c.splice(5,c.length-5);c=JSON.stringify(c);localStorage.setItem("com_nenglp_launchhistory_"+b,c)}}},getLaunchHistory:function(){var a=this.extractSiteDomain(location.href);if(a.length!=0)return a=localStorage.getItem("com_nenglp_launchhistory_"+a),null==a?[]:JSON.parse(a)},invokeApp:function(a,
b,c,d,e){this.debug("invokeApp extoken = "+a+" appname = "+b.name+" for url = "+location.href+", text = "+d+", img = "+e);var f=b.script_id+"."+c+"("+JSON.stringify(a)+","+JSON.stringify(this.commonspec)+","+JSON.stringify(b)+","+JSON.stringify(d)+","+JSON.stringify(e)+");";if(document.getElementById("script_"+b.script_id))window.eval(f);else{var c=this.commonspec.exurl+b.name+"/"+b.name+".js",g=document.getElementById(this.commonspec.div_container);if(com_nenglp_excommon_debug==!0){if(null==document.getElementById("script_"+
b.script_id))a=document.createElement("script"),a.id="script_"+b.script_id,a.language="javascript",a.type="text/javascript",a.charset="utf-8",a.src=c,a.defer=!0,g.appendChild(a);setTimeout(function(){window.eval(f)},1E3)}else null==document.getElementById("script_"+b.script_id)?this.sendRequestNow(a,c,function(a){if(!(null==a||a.length==0||a.indexOf("var")!=0)){if(null==document.getElementById("script_"+b.script_id)){var c=document.createElement("script");c.id="script_"+b.script_id;c.language="javascript";
c.type="text/javascript";c.charset="utf-8";c.text=a;g.appendChild(c)}setTimeout(function(){typeof window[b.script_id]=="undefined"?window.eval(a+f):window.eval(f)},100)}},!0,!0,{}):setTimeout(function(){window.eval(f)},100)}},addMenuItem:function(a,b,c,d,e){var f=this;com_nenglp_excommon.menuCount++;var g="com_nenglp_exmenu"+com_nenglp_excommon.menuCount,h=document.createElement("a");h.id=g;g=c.caption;d.length>0?g+="\uff1a"+d:e.length>0&&(g+="\uff1a"+e);h.setAttribute("title",g);h.href="javascript:void(0);";
h.onclick=function(){var a=(new Date).getTime();com_nenglp_excommon.timeOfDisplay=a;var g=h.getAttribute("timestamp");h.setAttribute("timestamp",a.toString());g&&parseInt(g)+1500>a||(f.launchApp(b,c.name,d,e),f.hideMenu())};var i=document.createElement("img");i.src=f.getAppIcon(c.name);i.style.cssText="float:left;border: 1px solid #DDD;width:16px;height:16px;margin:0px;padding:0px;";i.onmousemove=function(){com_nenglp_excommon.timeOfDisplay=(new Date).getTime()};i.onmouseover=function(){i.style.border=
"1px solid white"};i.onmouseout=function(){i.style.border="1px solid #DDD"};h.appendChild(i);a.appendChild(h)},addMenuConfig:function(a){this.menuCount++;var b=document.createElement("a");b.style.cssText="border:none;line-height:18px;font-size:12px;margin:0px;padding:0px;";b.href="http://ex.nenglp.com/exconfig.htm?referrer="+encodeURIComponent(location.href);b.setAttribute("target","exconfig");b.setAttribute("title","\u914d\u7f6e");var c=document.createElement("img");c.src="http://ex.nenglp.com/exconfig.png";
c.style.cssText="border: 1px solid #DDD;width:16px;height:16px;margin:0px;padding:0px;";c.onmousemove=function(){com_nenglp_excommon.timeOfDisplay=(new Date).getTime()};c.onmouseover=function(){c.style.border="1px solid white"};c.onmouseout=function(){c.style.border="1px solid #DDD"};b.appendChild(c);a.appendChild(b)},hideMenu:function(){document.getElementById("com_nenglp_exmenu").style.display="none"},getLaunchInfo:function(){var a=this.getSelectionText(),b=null;a.length==0&&(b=this.getSelectionImage());
var c="";b&&(c=b.getAttribute("src"));c=c&&c.length>0?this.rebaseImageSrc(c):"";return{text:a,imageSrc:c}},isMenuToolbarEnabled:function(){try{var a=localStorage.getItem("com_nenglp_siteconfig");if(null!=a&&!0==JSON.parse(a).toolbar)return!0}catch(b){}return!1},timeOfDisplay:0,loadMenu:function(a,b,c){if(!1!=this.isMenuToolbarEnabled()){var d=this,e=document.getElementById("com_nenglp_exmenu");if(null==e)e=document.createElement("div"),e.id="com_nenglp_exmenu",e.className="com_nenglp_cssreset",e.style.cssText=
"display:none;position:absolute;z-index:"+(d.zindex-10)+";border:1px solid #AAA;padding:1px;background:#DDD;height:18px;line-height:18px;",d.container.appendChild(e);e.innerHTML="";d.menuCount=0;var f=d.getLaunchInfo(a,b);d.getAppSpecs(c,function(g){for(var h=0;h<g.length;h++)typeof g[h].launch=="undefined"&&g.splice(h,1);g.sort(function(a,b){return a.name.localeCompare(b.name)});var i=d.getLaunchHistory();if(i.length>0)for(h=0;h<i.length;h++)for(var l=0;l<g.length;l++)if(i[h].name==g[l].name){g.splice(l,
1);break}g=i.concat(g);if(g.length!=0){for(h=0;h<g.length;h++)d.addMenuItem(e,c,g[h],f.text,f.imageSrc);e.style.left=a.x+b.x+"px";e.style.width=2+com_nenglp_excommon.menuCount*18+"px";e.style.top=a.y+b.y-24+"px";e.style.display="block";com_nenglp_excommon.timeOfDisplay=(new Date).getTime();setTimeout(function(){d.tryHideMenu()},3E3)}})}},tryHideMenu:function(){var a=this;com_nenglp_excommon.timeOfDisplay+3E3<(new Date).getTime()?a.hideMenu():setTimeout(function(){a.tryHideMenu()},3E3)},getSelectionText:function(){var a=
window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection.createRange().text;if(!a||a=="")document.activeElement.selectionStart&&(a=document.activeElement.value.substring(document.activeElement.selectionStart.document.activeElement.selectionEnd));a=a.toString();if(a.length>0)return a;if(typeof this.contextmenu.focus=="undefined")return"";return this.contextmenu.focus.tagName.toUpperCase()!="A"?"":a=this.contextmenu.focus.innerText},getSelectionImage:function(){return typeof this.contextmenu.focus==
"undefined"?null:this.contextmenu.focus.tagName.toUpperCase()=="IMG"?this.contextmenu.focus:this.contextmenu.focus.nextElementSibling&&this.contextmenu.focus.nextElementSibling.tagName.toUpperCase()=="IMG"?this.contextmenu.focus.nextElementSibling:null},getMousePosition:function(a){return{x:a.clientX,y:a.clientY}},getScrollPosition:function(){var a=0,b=0;if(typeof window.pageYOffset=="number")a=window.pageXOffset,b=window.pageYOffset;else if(document.documentElement&&(document.documentElement.scrollLeft||
document.documentElement.scrollTop))a=document.documentElement.scrollLeft,b=document.documentElement.scrollTop;else if(document.body&&(document.body.scrollLeft||document.body.scrollTop))a=document.body.scrollLeft,b=document.body.scrollTop;return{x:a,y:b}},hideChildrenByClass:function(a){if(a=this.getChildrenByClass(document.body,a))for(var b=0;b<a.length;b++)a[b].style.display="none"},hideForms:function(){for(var a=document.forms,b=0;b<a.length;b++)a[b].style.display="none"},clearChildrenStyleByTag:function(a){for(var a=
document.getElementsByTagName(a.toUpperCase()),b=0;b<a.length;b++)a[b].style.cssText="none"},hideChildrenByTag:function(a){for(var a=document.getElementsByTagName(a.toUpperCase()),b=0;b<a.length;b++)a[b].style.display="none"},hideImagesBySrc:function(a){for(var b=document.images,c=0;c<b.length;c++)if(b[c].src==a)b[c].style.display="none"},hideElementById:function(a){if(a=document.getElementById(a))a.style.display="none"},blobToBase64:function(a,b){var c=new FileReader;c.onload=function(){var a=c.result.split(",")[1];
b(a)};c.readAsDataURL(a)},base64ToBlob:function(a,b){for(var c=atob(a),d=c.length,e=new ArrayBuffer(d),e=new Uint8Array(e),f=0;f<d;f++)e[f]=c.charCodeAt(f);b(new Blob([e]))},displayCenterPanel:function(a,b,c){var d=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f=document.getElementById("com_nenglp_bgpanel");f&&this.container.removeChild(f);f=document.createElement("div");f.id="com_nenglp_bgpanel";f.style.cssText="z-index:"+(this.zindex+8)+";background-color:gray;opacity:0.5;filter:alpha(opacity:50); top:0px;left:0px;width:"+
d+"px;height:"+e+"px;position:fixed;";this.container.appendChild(f);var g=document.getElementById("com_nenglp_centerpanel");g&&this.container.removeChild(g);var g=document.createElement("div"),h=a+2,i=b+2+16,d=Math.ceil((d-h)/2),e=Math.ceil((e-i)/2);g.id="com_nenglp_centerpanel";g.style.cssText="position:fixed;z-index:"+(this.zindex+10)+";background-color:white;opacity:1.0;top:"+e+"px;left:"+d+"px;width:"+h+"px;height:"+i+"px;overflow:hidden;font-size:12px;padding:1px;border: 1px solid #444;-webkit-border-radius:5px;-webkit-box-shadow:5px 5px 5px #aaa;";
g.innerHTML='<div style="height:16px;text-align:right;line-height:16px;font-size:12px;background:#AAA;"><a href="javascript:void(0)" onclick="document.getElementById(\'com_nenglp_centerpanel\').style.display=\'none\';document.getElementById(\'com_nenglp_bgpanel\').style.display=\'none\';"><span style="color:white;margin-left:2px;">\u9000\u51fa</span></a></div><iframe id="com_nenglp_centerpanelframe" style="width:'+a+"px;height:"+b+'px;padding:1px;border:none;margin:0px;"></iframe>';this.container.appendChild(g);
a=document.getElementById("com_nenglp_centerpanelframe");a.contentDocument.body.innerHTML=c;return{bg:f,box:g,frame:a}},parseQueryString:function(){for(var a=location.search.substr(1).split("&"),b={},c=0;c<a.length;c++){var d=a[c].split("=");d.length==2&&(b[d[0]]=d[1])}return b},loadJquery:function(a,b){var c=this,d=document.getElementById(c.commonspec.jquery_id);d?typeof window.com_nenglp_jQuery=="undefined"?b(null):b(window.com_nenglp_jQuery):c.sendRequestNow(a,c.commonspec.jquery_src,function(a){if(a.length==
0)b(null);else{d=document.getElementById(c.commonspec.jquery_id);if(!d){var f=document.createElement("script");f.id=c.commonspec.jquery_id;f.language="javascript";f.type="text/javascript";f.charset="utf-8";f.defer=!0;f.text=a;c.container.appendChild(f)}typeof window.com_nenglp_jQuery=="undefined"?b(null):b(window.com_nenglp_jQuery)}},!0,!0,{})},rebaseImageSrc:function(a){return a.charAt(0)=="/"?location.protocol+"//"+document.location.host+a:/^https?/.test(a)?a:location.href.substring(0,location.href.lastIndexOf("/"))+
"/"+a},formatDate:function(a){var b={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},c="yyyy-MM-dd hh:mm:ss";/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in b)RegExp("("+d+")").test(c)&&(c=c.replace(RegExp.$1,RegExp.$1.length==1?b[d]:("00"+b[d]).substr((""+b[d]).length)));return c},formatDateByTimestamp:function(a){var b=new Date;b.setTime(a);
return this.formatDate(b)},insertAfter:function(a,b){var c=b.parentNode;c.lastChild==b?c.appendChild(a):c.insertBefore(a,b.nextSibling)},insertInvisibleFrame:function(a,b,c,d){var e=document.createElement("iframe");if(typeof d!="undefined")e.src=d;e.style.cssText="display:none;width:"+a+"px;height:"+b+"px;border:none;";c.firstElementChild?c.insertBefore(e,c.firstElementChild):c.appendChild(e);return e},installScript:function(a,b){if(!document.getElementById(a)){var c=document.createElement("script");
c.id=a;c.language="javascript";c.type="text/javascript";c.charset="utf-8";c.src=b;this.container.appendChild(c)}},xsearch:{index_:0,exec:function(a,b,c,d,e){var f=this;f.ex=b;var g=[];f.search(a,b,c.word,c.sites,0,typeof c.top=="undefined"?20:c.top,g,function(){g.length>0&&f.show(a,b,d,c,g);typeof e!="undefined"&&e()})},search:function(a,b,c,d,e,f,g,h){var i=this,l="http://www.baidu.com/s?wd="+encodeURIComponent(c)+"+site%3A"+d[e];b.sendRequestNow(a,l,function(j){j=i.extract(b,j);if(null!=j&&j.length>
0)for(var k=0;k<j.length&&k<f;k++)j[k].title.indexOf("Zuwanderung und Integration")<0&&j[k].title.indexOf("\u5c55\u5f00")!=0&&g.push(j[k]);e+1<d.length?i.search(a,b,c,d,e+1,f,g,h):h()})},extract:function(a,b){return a.parseHtmlList(b,'class="result',[["href",["data-click","href",'"'],'"'],["title",">","</a>"],["content",["c-abstract",">"],"</div>"]],'class="m"')},show:function(a,b,c,d,e){var f=d.width,g=d.appname,h=d.caption,i=d.backgroundColor,l=d.headColor,j=d.anchorColor,k=d.contentColor,n=d.emColor,
m;m=typeof d.compact=="undefined"?!1:!0;var p=c.contentDocument.createElement("style"),i="body {font-size:12px;margin:0px;padding:2px;line-height:1.5;background:"+i+";width:"+(f-4)+"px;overflow-x:hidden;} a,a:link,a:active {text-decoration:none;font-size:";i+=m?"12px;":"16px;";i+="color:"+j+"} a:hover{text-decoration:underline;}a:visited{} div {color:"+k+"} em {font-style:normal;color:"+n+"}";p.appendChild(c.contentDocument.createTextNode(i));c.contentDocument.head.appendChild(p);j="<div>";m&&(j+=
'<a target=_blank title="'+h+'" href="http://ex.nenglp.com/xsearch.htm?appname='+encodeURIComponent(g)+"&caption="+encodeURIComponent(h)+"&word="+encodeURIComponent(d.word)+"&sites="+encodeURIComponent(d.sites.join(","))+'">');j+='<div style="font-weight:bold;font-size:14px;height:18px;color:'+l+";width:"+(f-4)+'px;overflow:hidden;"><img valign=middle width=16 height=16 src="http://ex.nenglp.com/'+g+'/appicon16.png" style="border:none;vertical-align: middle;" >&nbsp;'+h;m&&(j+="&nbsp;\u00bb");j+=
"</div>";m&&(j+="</a>");j+='<div style="width:'+(f-4)+'px;overflow-x:hidden;">';for(d=0;d<e.length;d++)f=e[d],g=f.href,g.indexOf("//www.baidu.com")==0&&(g=g.replace("//www.baidu.com","http://www.baidu.com")),j+='<div style="margin-top:2px;width:800px;word-break: keep-all;"><a id="com_nenglp_common_xsearch'+(this.index_+d)+'" title="'+f.title.replace(/<[^>]*>/g,"")+" "+f.content.replace(/<[^>]*>/g,"")+'" target=_blank data-click="'+g+'" href="javascript:void(0)" >'+f.title+"</a></div>",m||(j+='<div style="margin-bottom:8px;">'+
f.content+"</div>");j+="</div></div>";c.contentDocument.body.innerHTML=j;c.style.height=c.contentDocument.body.firstElementChild.offsetHeight+4+4+"px";c.style.display="block";for(d=0;d<e.length;d++)c.contentDocument.getElementById("com_nenglp_common_xsearch"+(this.index_+d)).onclick=function(){b.openNewTab(a,this.getAttribute("data-click"))}}},docBaseId_:1E10,dbSave:function(a,b,c){this.sendRequestNow("","exdb://",function(a){typeof c!="undefined"&&c(a)},!1,!1,{},{func:"save",dbname:a,doc:b,options:{}})},
dbGet:function(a,b,c){this.sendRequestNow("","exdb://",function(a){c(a)},!1,!1,{},{func:"get",dbname:a,docId:this.docBaseId_+b,options:{}})},dbInfo:function(a,b){this.sendRequestNow("","exdb://",function(a){b(a)},!1,!1,{},{func:"info",dbname:a,options:{}})},dbList:function(a,b,c,d,e){b={startkey:(this.docBaseId_+b).toString(),endkey:(this.docBaseId_+b+c).toString(),include_docs:!0};if(d)b.descending=!0;this.sendRequestNow("","exdb://",function(a){e(a)},!1,!1,{},{func:"allDocs",dbname:a,options:b})},
dbRemove:function(a,b,c){var d=this;d.sendRequestNow("","exdb://",function(a){d.debug(a)},!1,!1,{},{func:"remove",dbname:a,options:{},doc:{_id:b,_rev:c}})}};

com_nenglp_excommon.init({"div_container":"com_nenglp_container","div_page2content":"page2content","div_content2page":"content2page","attr_page2content":"page2content","attr_content2page":"content2page","attr_content2pageb":"content2pageb","attr_morespecs":"morespecs","exurl":"http://121.199.20.32/ex.nenglp.com/retail/","exhome":"http://ex.nenglp.com/","script_id":"com_nenglp_excommon","script_src":"http://121.199.20.32/ex.nenglp.com/retail/excommon.js","jquery_id":"com_nenglp_jquery","jquery_src":"http:/121.199.20.32/ex.nenglp.com/retail/jquery-1.10.2.min.js","conn_url":"http://conn.memorybone.com/ver/","entry":"com_nenglp_excommon.init","tools_json":"http://121.199.20.32/ex.nenglp.com/retail/extools.json","contextmenu":{"title":"运行其它工具","id":"exlaunch"},"caches":["http://121.199.20.32/ex.nenglp.com/retail/extools.json","http://121.199.20.32/ex.nenglp.com/retail/excommon.js","http://121.199.20.32/ex.nenglp.com/retail/jquery-1.10.2.min.js"]});</script></div></body></html>